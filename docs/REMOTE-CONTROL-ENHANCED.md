# Remote Control Enhanced - è¿œç¨‹æ§åˆ¶å¢å¼ºåŠŸèƒ½

## æ¦‚è¿°

Remote Controlæ¨¡å—å·²å…¨é¢å‡çº§ï¼Œæ–°å¢äº†å¤šé¡¹äº¤äº’å¢å¼ºåŠŸèƒ½ï¼Œè®©è¿œç¨‹æ§åˆ¶æ›´åŠ æ™ºèƒ½ã€ä¾¿æ·å’Œå¼ºå¤§ã€‚

## æ–°å¢åŠŸèƒ½

### 1. Telegramå†…è”é”®ç›˜ â­ï¼ˆæœ€é‡è¦ï¼‰

#### ä¸»èœå• (`/menu`)
äº¤äº’å¼ä¸»èœå•ï¼Œæä¾›æ‰€æœ‰å¸¸ç”¨æ“ä½œçš„å¿«æ·æŒ‰é’®ï¼š

```
ğŸ¤– Claude Pulse è¿œç¨‹æ§åˆ¶

ğŸ‘¤ ä½ çš„è§’è‰²: admin

[ğŸ“Š ç³»ç»ŸçŠ¶æ€] [ğŸ“‹ æ´»è·ƒä¼šè¯]
[ğŸ“ æŸ¥çœ‹æ—¥å¿—] [ğŸ“ˆ å·¥ä½œç»Ÿè®¡]
[âŒ é”™è¯¯æ—¥å¿—] [âš ï¸ è­¦å‘Šæ—¥å¿—]
[ğŸ’¡ æ™ºèƒ½å»ºè®®] [â“ å¸®åŠ©]
```

#### çŠ¶æ€é¡µé¢å†…è”é”®ç›˜
æŸ¥çœ‹çŠ¶æ€åï¼Œæä¾›å¿«æ·æ“ä½œæŒ‰é’®ï¼š

```
ğŸ“Š Claude Code çŠ¶æ€
...

[ğŸ“‹ æŸ¥çœ‹ä¼šè¯] [ğŸ“ æŸ¥çœ‹æ—¥å¿—]
[ğŸ“ˆ æŸ¥çœ‹ç»Ÿè®¡] [ğŸ’¡ æ™ºèƒ½å»ºè®®]
[ğŸ”„ åˆ·æ–°çŠ¶æ€] [ğŸ“± ä¸»èœå•]
```

#### ä¼šè¯åˆ—è¡¨å†…è”é”®ç›˜
æ˜¾ç¤ºä¼šè¯åˆ—è¡¨ï¼Œå¹¶æä¾›ä¼šè¯è¯¦æƒ…å¿«æ·æŒ‰é’®ï¼š

```
ğŸ“‹ æ´»è·ƒä¼šè¯ (5)
...

[ğŸ“‚ Project-7...] [ğŸ“‚ fangyu-code...]
[ğŸ“‚ test-app...] [ğŸ“‚ my-project...]
[ğŸ”„ åˆ·æ–°] [ğŸ“± ä¸»èœå•]
```

#### æ—¥å¿—æŸ¥çœ‹å†…è”é”®ç›˜
æŸ¥çœ‹æ—¥å¿—æ—¶ï¼Œæä¾›è¿‡æ»¤å’Œåˆ·æ–°æŒ‰é’®ï¼š

```
ğŸ“ æœ€è¿‘æ—¥å¿— (å…¨éƒ¨)
...

[ğŸ“ å…¨éƒ¨æ—¥å¿—] [âŒ é”™è¯¯æ—¥å¿—]
[âš ï¸ è­¦å‘Šæ—¥å¿—] [ğŸ”„ åˆ·æ–°]
[ğŸ“± ä¸»èœå•]
```

### 2. è‡ªç„¶è¯­è¨€ç†è§£

æ”¯æŒç”¨è‡ªç„¶è¯­è¨€å‘é€å‘½ä»¤ï¼Œæ— éœ€è®°å¿†å‘½ä»¤æ ¼å¼ï¼š

| è‡ªç„¶è¯­è¨€ | è¯†åˆ«ä¸ºå‘½ä»¤ |
|---------|-----------|
| "æŸ¥çœ‹çŠ¶æ€" | `/status` |
| "çœ‹çœ‹ä¼šè¯" | `/sessions` |
| "æ˜¾ç¤ºæ—¥å¿—" | `/logs` |
| "æœ‰ä»€ä¹ˆé”™è¯¯å—" | `/logs error` |
| "æŸ¥çœ‹è­¦å‘Š" | `/logs warn` |
| "å¸®åŠ©" | `/help` |
| "æ‰“å¼€èœå•" | `/menu` |

**ç¤ºä¾‹ï¼š**
```
ç”¨æˆ·: çœ‹çœ‹æœ€è¿‘æœ‰ä»€ä¹ˆé”™è¯¯
Bot: [è‡ªåŠ¨è¯†åˆ«ä¸º /logs error å¹¶æ‰§è¡Œ]
```

### 3. è¯­éŸ³å‘½ä»¤æ”¯æŒ

æ”¯æŒæ¥æ”¶Telegramè¯­éŸ³æ¶ˆæ¯ï¼ˆåŠŸèƒ½æ¡†æ¶å·²å®ç°ï¼Œéœ€è¦é›†æˆè¯­éŸ³è¯†åˆ«APIï¼‰ï¼š

- å‘é€è¯­éŸ³æ¶ˆæ¯
- è‡ªåŠ¨è½¬æ¢ä¸ºæ–‡å­—
- æ‰§è¡Œå¯¹åº”å‘½ä»¤

**å½“å‰çŠ¶æ€ï¼š** æ¡†æ¶å·²å®ç°ï¼Œç­‰å¾…é›†æˆè¯­éŸ³è¯†åˆ«APIï¼ˆå¦‚OpenAI Whisperï¼‰

### 4. å‘½ä»¤å†å²å’Œæ¨¡æ¿

#### å‘½ä»¤å†å²
- è‡ªåŠ¨è®°å½•æ¯ä¸ªç”¨æˆ·çš„å‘½ä»¤å†å²ï¼ˆæœ€å¤š50æ¡ï¼‰
- ä½¿ç”¨ `/repeat` å¿«é€Ÿé‡å¤ä¸Šä¸€æ¡å‘½ä»¤

**ç¤ºä¾‹ï¼š**
```
ç”¨æˆ·: /logs error
Bot: [æ˜¾ç¤ºé”™è¯¯æ—¥å¿—]

ç”¨æˆ·: /repeat
Bot: [å†æ¬¡æ˜¾ç¤ºé”™è¯¯æ—¥å¿—]
```

#### å‘½ä»¤æ¨¡æ¿
é¢„è®¾å¸¸ç”¨å‘½ä»¤æ¨¡æ¿ï¼š

```javascript
{
  'check_errors': '/logs error',
  'check_warnings': '/logs warn',
  'quick_status': '/status',
  'recent_sessions': '/sessions'
}
```

### 5. æ™ºèƒ½å‘½ä»¤å»ºè®®

æ ¹æ®å½“å‰ç³»ç»ŸçŠ¶æ€ï¼Œè‡ªåŠ¨ç”Ÿæˆæ™ºèƒ½å»ºè®®ï¼š

**å»ºè®®ç±»å‹ï¼š**
- å‘ç°é”™è¯¯æ—¥å¿— â†’ å»ºè®®æŸ¥çœ‹é”™è¯¯
- å‘ç°è­¦å‘Šæ—¥å¿— â†’ å»ºè®®æŸ¥çœ‹è­¦å‘Š
- å†…å­˜ä½¿ç”¨è¿‡é«˜ â†’ å»ºè®®æŸ¥çœ‹çŠ¶æ€
- è¿è¡Œæ—¶é—´è¾ƒé•¿ â†’ å»ºè®®æŸ¥çœ‹ç»Ÿè®¡

**ç¤ºä¾‹ï¼š**
```
ğŸ’¡ æ™ºèƒ½å»ºè®®

1. å‘ç° 2536 ä¸ªé”™è¯¯æ—¥å¿—
   å»ºè®®æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä»¥æ’æŸ¥é—®é¢˜

2. å‘ç° 15 ä¸ªè­¦å‘Šæ—¥å¿—
   å»ºè®®æŸ¥çœ‹è­¦å‘Šæ—¥å¿—

[âŒ æŸ¥çœ‹é”™è¯¯] [âš ï¸ æŸ¥çœ‹è­¦å‘Š]
[ğŸ”„ åˆ·æ–°å»ºè®®] [ğŸ“± ä¸»èœå•]
```

### 6. å¤šç”¨æˆ·æ”¯æŒå’Œæƒé™ç®¡ç†

#### æƒé™çº§åˆ«

| è§’è‰² | æƒé™ | å¯ç”¨å‘½ä»¤ |
|------|------|---------|
| **admin** | ç®¡ç†å‘˜ | æ‰€æœ‰å‘½ä»¤ |
| **user** | æ™®é€šç”¨æˆ· | status, sessions, logs, stats, help, menu, session, repeat |
| **viewer** | è®¿å®¢ | status, help, menu |

#### é…ç½®ç¤ºä¾‹

```json
{
  "userPermissions": {
    "6145538033": "admin",
    "123456789": "user",
    "987654321": "viewer"
  }
}
```

#### æƒé™éªŒè¯
- è‡ªåŠ¨éªŒè¯ç”¨æˆ·æƒé™
- æƒé™ä¸è¶³æ—¶æ˜¾ç¤ºå‹å¥½æç¤º
- æ¯æ¡å‘½ä»¤éƒ½ä¼šæ£€æŸ¥æƒé™

## å‘½ä»¤åˆ—è¡¨

### åŸºæœ¬å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ | æƒé™ |
|------|------|------|
| `/menu` | æ‰“å¼€ä¸»èœå•ï¼ˆæ¨èï¼‰ | æ‰€æœ‰ç”¨æˆ· |
| `/status` | æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ | æ‰€æœ‰ç”¨æˆ· |
| `/sessions` | æŸ¥çœ‹æ´»è·ƒä¼šè¯åˆ—è¡¨ | user, admin |
| `/logs [ç±»å‹] [è¡Œæ•°]` | æŸ¥çœ‹æ—¥å¿— | user, admin |
| `/stats` | æŸ¥çœ‹å·¥ä½œç»Ÿè®¡ | user, admin |
| `/help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | æ‰€æœ‰ç”¨æˆ· |
| `/repeat` | é‡å¤ä¸Šä¸€æ¡å‘½ä»¤ | user, admin |

### ä¼šè¯ç®¡ç†

| å‘½ä»¤ | è¯´æ˜ | æƒé™ |
|------|------|------|
| `/session <åç§°>` | æŸ¥çœ‹ä¼šè¯è¯¦æƒ… | user, admin |

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹å…¨éƒ¨æ—¥å¿—ï¼ˆæœ€å20è¡Œï¼‰
/logs

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼ˆæœ€å20è¡Œï¼‰
/logs error

# æŸ¥çœ‹è­¦å‘Šæ—¥å¿—ï¼ˆæœ€å50è¡Œï¼‰
/logs warn 50
```

## é…ç½®è¯´æ˜

### config.json

```json
{
  "modules": {
    "remote-control": {
      "enabled": true,
      "interval": 5000,
      "botToken": "YOUR_TELEGRAM_BOT_TOKEN",
      "allowedChatIds": ["6145538033", "123456789"],
      "userPermissions": {
        "6145538033": "admin",
        "123456789": "user"
      }
    }
  }
}
```

### é…ç½®é¡¹è¯´æ˜

| é…ç½®é¡¹ | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `botToken` | string | Telegram Bot Token |
| `allowedChatIds` | array | å…è®¸è®¿é—®çš„Chat IDåˆ—è¡¨ |
| `userPermissions` | object | ç”¨æˆ·æƒé™é…ç½® |

## ä½¿ç”¨ç¤ºä¾‹

### 1. å¿«é€ŸæŸ¥çœ‹çŠ¶æ€

```
ç”¨æˆ·: /menu
Bot: [æ˜¾ç¤ºä¸»èœå•]

ç”¨æˆ·: [ç‚¹å‡» "ğŸ“Š ç³»ç»ŸçŠ¶æ€" æŒ‰é’®]
Bot: [æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€ + æ“ä½œæŒ‰é’®]
```

### 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

```
ç”¨æˆ·: æœ‰ä»€ä¹ˆé”™è¯¯å—
Bot: [è‡ªåŠ¨è¯†åˆ«ä¸º /logs error]
     [æ˜¾ç¤ºé”™è¯¯æ—¥å¿— + è¿‡æ»¤æŒ‰é’®]
```

### 3. æŸ¥çœ‹ä¼šè¯è¯¦æƒ…

```
ç”¨æˆ·: /sessions
Bot: [æ˜¾ç¤ºä¼šè¯åˆ—è¡¨ + ä¼šè¯æŒ‰é’®]

ç”¨æˆ·: [ç‚¹å‡» "ğŸ“‚ Project-7..." æŒ‰é’®]
Bot: [æ˜¾ç¤º Project-7 ä¼šè¯è¯¦æƒ…]
```

### 4. ä½¿ç”¨æ™ºèƒ½å»ºè®®

```
ç”¨æˆ·: /menu
Bot: [æ˜¾ç¤ºä¸»èœå•]

ç”¨æˆ·: [ç‚¹å‡» "ğŸ’¡ æ™ºèƒ½å»ºè®®" æŒ‰é’®]
Bot: [æ˜¾ç¤ºæ™ºèƒ½å»ºè®® + å¿«æ·æ“ä½œæŒ‰é’®]

ç”¨æˆ·: [ç‚¹å‡» "âŒ æŸ¥çœ‹é”™è¯¯" æŒ‰é’®]
Bot: [æ˜¾ç¤ºé”™è¯¯æ—¥å¿—]
```

## æŠ€æœ¯å®ç°

### å†…è”é”®ç›˜å®ç°

```javascript
const keyboard = {
  inline_keyboard: [
    [
      { text: 'ğŸ“Š ç³»ç»ŸçŠ¶æ€', callback_data: 'status' },
      { text: 'ğŸ“‹ æ´»è·ƒä¼šè¯', callback_data: 'sessions' }
    ],
    [
      { text: 'ğŸ“ æŸ¥çœ‹æ—¥å¿—', callback_data: 'logs' },
      { text: 'ğŸ“ˆ å·¥ä½œç»Ÿè®¡', callback_data: 'stats' }
    ]
  ]
};

await this.sendMessage(chatId, message, { reply_markup: keyboard });
```

### å›è°ƒæŸ¥è¯¢å¤„ç†

```javascript
async processCallbackQuery(callbackQuery) {
  const chatId = callbackQuery.message.chat.id.toString();
  const data = callbackQuery.data;

  // è§£æå›è°ƒæ•°æ®
  const [action, ...params] = data.split(':');

  // æ‰§è¡Œå¯¹åº”çš„å¤„ç†å™¨
  const handler = this.callbackHandlers[action];
  if (handler) {
    await handler(chatId, params);
    await this.answerCallbackQuery(callbackQuery.id, 'âœ… å·²æ‰§è¡Œ');
  }
}
```

### è‡ªç„¶è¯­è¨€ç†è§£

```javascript
parseNaturalLanguage(text) {
  for (const pattern of this.nlpPatterns) {
    if (pattern.pattern.test(text)) {
      return {
        command: pattern.command.split(' ')[0],
        args: pattern.command.split(' ').slice(1)
      };
    }
  }
  return null;
}
```

## æµ‹è¯•

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š

```bash
cd C:/Users/666/.claude/hooks/scripts/claude-pulse
node test-remote-control-enhanced.js
```

æµ‹è¯•å†…å®¹ï¼š
- âœ… æƒé™ç®¡ç†
- âœ… å‘½ä»¤å†å²
- âœ… è‡ªç„¶è¯­è¨€ç†è§£
- âœ… æ™ºèƒ½å»ºè®®
- âœ… å†…è”é”®ç›˜ç»“æ„
- âœ… å›è°ƒæ•°æ®è§£æ

## æœªæ¥è®¡åˆ’

### çŸ­æœŸè®¡åˆ’
- [ ] é›†æˆè¯­éŸ³è¯†åˆ«APIï¼ˆOpenAI Whisperï¼‰
- [ ] æ·»åŠ æ›´å¤šè‡ªç„¶è¯­è¨€æ¨¡å¼
- [ ] æ”¯æŒå‘½ä»¤åˆ«å

### é•¿æœŸè®¡åˆ’
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] è‡ªå®šä¹‰å‘½ä»¤æ¨¡æ¿
- [ ] å‘½ä»¤æ‰§è¡Œç»Ÿè®¡
- [ ] é«˜çº§æƒé™æ§åˆ¶ï¼ˆåŸºäºå‘½ä»¤å‚æ•°ï¼‰

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è·å–Chat IDï¼Ÿ

A: å‘Botå‘é€ä»»æ„æ¶ˆæ¯ï¼Œåœ¨æ—¥å¿—ä¸­æŸ¥çœ‹ï¼š
```
Unauthorized access attempt from chat_id: 123456789 (username)
```

### Q: å¦‚ä½•æ·»åŠ æ–°ç”¨æˆ·ï¼Ÿ

A: åœ¨ `config.json` ä¸­æ·»åŠ ï¼š
```json
{
  "allowedChatIds": ["6145538033", "æ–°ç”¨æˆ·çš„Chat ID"],
  "userPermissions": {
    "æ–°ç”¨æˆ·çš„Chat ID": "user"
  }
}
```

### Q: å†…è”é”®ç›˜æŒ‰é’®ä¸å“åº”ï¼Ÿ

A: æ£€æŸ¥ï¼š
1. Botæ˜¯å¦æ­£å¸¸è¿è¡Œ
2. å›è°ƒå¤„ç†å™¨æ˜¯å¦æ­£ç¡®æ³¨å†Œ
3. æŸ¥çœ‹æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### Q: è‡ªç„¶è¯­è¨€è¯†åˆ«ä¸å‡†ç¡®ï¼Ÿ

A: å¯ä»¥åœ¨ `nlpPatterns` ä¸­æ·»åŠ æ›´å¤šæ¨¡å¼ï¼š
```javascript
this.nlpPatterns = [
  { pattern: /ä½ çš„æ¨¡å¼/i, command: '/your_command' },
  // ...
];
```

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## è®¸å¯è¯

MIT License

---

**ç‰ˆæœ¬**: v2.0.0
**æ›´æ–°æ—¥æœŸ**: 2026-02-09
**ä½œè€…**: Claude Pulse Team
